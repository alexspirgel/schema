<!DOCTYPE html>
<html>
	<head>
		<title>Schema</title>
		<script type="text/javascript" src="index.js"></script>
		<style>
			body {
				background: gray;
			}
		</style>
	</head>
	<body>
		<script type="text/javascript">
		console.dir(Schema);
		var schema = new Schema([
			{
				required: true,
				type: 'object',
				propertySchema: {
					width: {
						type: 'number',
					},
					height: {
						type: 'number'
					},
					flag: {
						required: true,
						type: 'boolean'
					},
					list: {
						type: 'array',
						minimumLength: 3,
						itemSchema: [
							{
								required: true,
								type: 'string',
								minimumCharacters: 10
							},
							{
								required: true,
								type: 'string',
								exactValue: 'special'
							}
						]
					}
				},
				custom: (inputPathManager) => {
					inputPathManager.addPathSegment('width');
					const width = inputPathManager.value;
					inputPathManager.removePathSegment();
					inputPathManager.addPathSegment('height');
					const height = inputPathManager.value;
					if ((width === null || width === undefined) && (height === null || height === undefined)) {
						throw new Schema.ValidationError(`Property 'custom' validation failed. Width and height cannot both be null or undefined.`);
					}
					else {
						return true;
					}
				}
			},
			{
				required: true,
				type: 'number'
			}
		]);

		console.dir(schema);

		var validationResult = schema.validate({
			width: 10,
			// height: 10,
			flag: false,
			list: ['test string1', 'test string2', 'special']
		});
		console.log('validationResult', validationResult);

		validationResult = schema.validate(123);
		console.log('validationResult', validationResult);
		</script>
	</body>
</html>