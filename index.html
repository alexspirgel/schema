<!DOCTYPE html>
<html>
	<head>
		<title>Schema</title>
		<script type="text/javascript" src="index.js"></script>
		<style>
			body {
				background: gray;
			}
		</style>
	</head>
	<body>
		<script type="text/javascript">

			console.log('Starting tests...');

			/*
				validateType
			*/

			// Boolean
			Schema.validateType('boolean', true) ? true : console.warn('Fail');
			Schema.validateType('boolean', 1) ? console.warn('Fail') : true;
			Schema.validateType('boolean', 'a') ? console.warn('Fail') : true;
			Schema.validateType('boolean', () => {}) ? console.warn('Fail') : true;
			Schema.validateType('boolean', []) ? console.warn('Fail') : true;
			Schema.validateType('boolean', {}) ? console.warn('Fail') : true;
			Schema.validateType('boolean', null) ? console.warn('Fail') : true;
			Schema.validateType('boolean', undefined) ? console.warn('Fail') : true;
			// Number
			Schema.validateType('number', true) ? console.warn('Fail') : true;
			Schema.validateType('number', 1) ? true : console.warn('Fail');
			Schema.validateType('number', 'a') ? console.warn('Fail') : true;
			Schema.validateType('number', () => {}) ? console.warn('Fail') : true;
			Schema.validateType('number', []) ? console.warn('Fail') : true;
			Schema.validateType('number', {}) ? console.warn('Fail') : true;
			Schema.validateType('number', null) ? console.warn('Fail') : true;
			Schema.validateType('number', undefined) ? console.warn('Fail') : true;
			// String
			Schema.validateType('string', true) ? console.warn('Fail') : true;
			Schema.validateType('string', 1) ? console.warn('Fail') : true;
			Schema.validateType('string', 'a') ? true : console.warn('Fail');
			Schema.validateType('string', () => {}) ? console.warn('Fail') : true;
			Schema.validateType('string', []) ? console.warn('Fail') : true;
			Schema.validateType('string', {}) ? console.warn('Fail') : true;
			Schema.validateType('string', null) ? console.warn('Fail') : true;
			Schema.validateType('string', undefined) ? console.warn('Fail') : true;
			// Function
			Schema.validateType('function', true) ? console.warn('Fail') : true;
			Schema.validateType('function', 1) ? console.warn('Fail') : true;
			Schema.validateType('function', 'a') ? console.warn('Fail') : true;
			Schema.validateType('function', () => {}) ? true : console.warn('Fail');
			Schema.validateType('function', []) ? console.warn('Fail') : true;
			Schema.validateType('function', {}) ? console.warn('Fail') : true;
			Schema.validateType('function', null) ? console.warn('Fail') : true;
			Schema.validateType('function', undefined) ? console.warn('Fail') : true;
			// Object
			Schema.validateType('object', true) ? console.warn('Fail') : true;
			Schema.validateType('object', 1) ? console.warn('Fail') : true;
			Schema.validateType('object', 'a') ? console.warn('Fail') : true;
			Schema.validateType('object', () => {}) ? console.warn('Fail') : true;
			Schema.validateType('object', []) ? true : console.warn('Fail');
			Schema.validateType('object', {}) ? true : console.warn('Fail');
			Schema.validateType('object', null) ? console.warn('Fail') : true;
			Schema.validateType('object', undefined) ? console.warn('Fail') : true;

			// Unset
			Schema.validateType('unset', true) ? console.warn('Fail') : true;
			Schema.validateType('unset', 1) ? console.warn('Fail') : true;
			Schema.validateType('unset', 'a') ? console.warn('Fail') : true;
			Schema.validateType('unset', () => {}) ? console.warn('Fail') : true;
			Schema.validateType('unset', []) ? console.warn('Fail') : true;
			Schema.validateType('unset', {}) ? console.warn('Fail') : true;
			Schema.validateType('unset', null) ? true : console.warn('Fail');
			Schema.validateType('unset', undefined) ? true : console.warn('Fail');

			/*
				validateCustom
			*/

			Schema.validateCustom(() => {return true;}, null) ? true : console.warn('Fail');
			Schema.validateCustom(() => {return false;}, null) ? console.warn('Fail') : true;
			Schema.validateCustom((value) => {return value === 2 ? true : false;}, 2) ? true : console.warn('Fail');
			Schema.validateCustom((value) => {return value === 2 ? true : false;}, 3) ? console.warn('Fail') : true;
			var customModel1 = {
				type: 'object',
				propertySchema: {
					width: [
						{
							type: 'number'
						},
						{
							type: 'unset',
							custom: (input, path, inputEntry) => {
								path.pop();
								path.push('height');
								const height = Schema.resolvePath(path, inputEntry);
								if (Schema.validateType('unset', height)) {
									return 'A width or height must be set. (width)';
								}
								return true;
							}
						}
					],
					height: [
						{
							type: 'number'
						},
						{
							type: 'unset',
							custom: (input, path, inputEntry) => {
								path.pop();
								path.push('width');
								const width = Schema.resolvePath(path, inputEntry);
								if (Schema.validateType('unset', width)) {
									return 'A width or height must be set. (height)';
								}
								return true;
							}
						}
					]
				}
			}
			var custonInput1 = {
				// width: 8,
				// height: 12
			}
			console.log(Schema.validate({
				model: customModel1,
				input: custonInput1
			}));

			/*
			*/

			// const test = new Schema(customModel1);
			// test.validate('stuff');

			console.log('All tests have finished. Failures will be displayed above. No warnings means all tests passed.');
		</script>
	</body>
</html>